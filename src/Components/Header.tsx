import styled from 'styled-components';
import { useTheme } from "../Contexts/ThemeContext"
import i18next from 'i18next';
import { useEffect, useState } from 'react';
import { useTranslation } from 'react-i18next';

const HeaderComponent = styled.header`
  background: ${props => props.theme.overlay};
  color: ${props => props.theme.text};
  display: flex;
  justify-content: center;
  gap: 32px;
  width: 100%;
  padding: 8px 0;
  position: fixed;
  transition: 0.5s;
  box-shadow: 0 8px 16px #0000001a;
  z-index: 9;
  font-family: "Rubik", sans-serif;
`

const Header: React.FC = () => {
  const { t } = useTranslation();
  const { theme, toggleTheme } = useTheme();
  const [currentLanguage, setCurrentLanguage] = useState<string>(() => {
    const storedLanguage = localStorage.getItem('userLanguage');
    console.log("Displaying in: " + storedLanguage);
    return storedLanguage || i18next.language;
  });

  useEffect(() => {
    const handleLanguageChange = (lng: string) => {
      setCurrentLanguage(lng);
      localStorage.setItem('userLanguage', lng);
    };

    i18next.on('languageChanged', handleLanguageChange);

    return () => {
      i18next.off('languageChanged', handleLanguageChange);
    };
  }, []);

  const handleChangeLanguage = () => {
    const newLang = currentLanguage === 'en' ? 'pt' : 'en';
    i18next.changeLanguage(newLang);
  };

  return (
    <HeaderComponent theme={theme}>
      {/*     Lenguage Button     */}
      <div onClick={handleChangeLanguage} style={{cursor: "pointer", display: "flex", flexDirection: "column", gap:"2px"}}>
        <svg style={{height:"48px"}} fill={theme.text} version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000.000000 1000.000000" preserveAspectRatio="xMidYMid meet"><g transform="translate(0.000000,1000.000000) scale(0.100000,-0.100000)"stroke="none"><path d="M6973 8037 c-216 -144 -392 -267 -390 -274 1 -6 139 -167 306 -358 209 -239 306 -343 311 -334 4 8 15 70 25 139 29 204 33 232 39 238 17 16 295 -13 500 -54 775 -153 1167 -501 1256 -1116 14 -93 14 -406 0 -546 -16 -167 -38 -314 -71 -475 -17 -82 -28 -151 -25 -154 2 -3 19 -6 37 -6 l32 -2 33 125 c197 728 188 1332 -27 1763 -254 510 -815 863 -1542 971 -57 9 -110 16 -116 16 -8 0 -10 11 -6 33 14 73 41 297 35 297 -3 -1 -182 -119 -397 -263z"/><path d="M1520 6755 l0 -1455 960 0 960 0 -2 173 -3 172 -762 3 -763 2 0 535 0 535 763 2 762 3 0 170 0 170 -762 3 -763 2 0 395 0 395 763 2 762 3 3 173 2 172 -960 0 -960 0 0 -1455z"/><path d="M4050 6755 l0 -1455 180 0 180 0 0 1297 c0 713 3 1293 6 1290 4 -4 314 -586 689 -1294 l683 -1288 241 -3 241 -2 0 1455 0 1455 -180 0 -180 0 -2 -1186 -3 -1185 -626 1183 -627 1183 -301 3 -301 2 0 -1455z"/><path d="M1008 5564 c-7 -13 -102 -305 -126 -389 -92 -318 -133 -601 -127 -885 5 -247 36 -413 115 -606 181 -443 591 -792 1170 -995 80 -28 306 -87 368 -95 60 -8 59 -6 37 -109 -30 -138 -45 -219 -41 -223 5 -4 29 9 481 268 176 101 326 189 334 196 11 10 -12 46 -141 216 -85 111 -212 280 -283 373 -70 94 -130 172 -131 173 -4 6 -22 -64 -57 -233 l-34 -160 -44 3 c-69 5 -265 40 -369 66 -382 96 -659 224 -876 407 -194 163 -320 392 -369 670 -31 173 -18 476 30 749 31 174 56 279 111 468 15 50 25 94 22 97 -10 10 -66 17 -70 9z"/><path d="M4030 3695 l0 -1455 195 0 195 0 0 538 0 539 289 6 c485 12 656 55 881 227 140 107 251 272 305 455 21 71 28 119 32 225 11 278 -51 461 -212 626 -122 125 -260 200 -458 248 -157 39 -283 46 -774 46 l-453 0 0 -1455z m925 1115 c325 -31 509 -164 561 -408 63 -302 -79 -590 -341 -688 -116 -43 -214 -54 -497 -54 l-258 0 0 580 0 580 213 0 c116 0 262 -5 322 -10z"/><path d="M6052 4978 l3 -173 518 -3 517 -2 0 -1280 0 -1280 195 0 195 0 0 1280 0 1280 518 2 517 3 3 173 2 172 -1235 0 -1235 0 2 -172z"/></g></svg>
        <p style={{textAlign:"center"}}>{t("header.lenBtn")}</p>
      </div>
      {/*     Theme Button     */}
      <div onClick={toggleTheme} style={{cursor: "pointer", display: "flex", flexDirection: "column", gap:"2px"}}>
        <svg style={{height:"48px"}} fill={theme.text} viewBox="-3.94 0 122.88 122.88" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M36.37,82.46c-2.88-3.29-5.86-6.71-8.22-11.74c-2.31-4.96-3.59-10.08-3.55-15.4c0.05-5.32,1.4-10.8,4.34-16.46 c0.02-0.04,0.04-0.07,0.06-0.11l0,0c3.85-6.52,9.24-10.88,15.24-13.32c5.03-2.06,10.5-2.76,15.86-2.27 c5.34,0.49,10.57,2.17,15.14,4.87c5.81,3.44,10.59,8.54,13.22,14.98c1.42,3.49,2.38,7.38,2.5,11.64c0.12,4.25-0.61,8.83-2.57,13.67 c-3,7.43-10.01,15.39-14.6,22.7c-0.25-0.05-0.51-0.06-0.77-0.02l-6.19,0.92l9.43-32.8c0.27-0.93-0.28-1.9-1.21-2.17 c-0.93-0.26-1.9,0.28-2.17,1.21L63.01,92.5l-9.36,1.39l-9.89-31.44c0.71,0.14,1.46-0.17,1.85-0.83l7.01-11.93l3.57,8.19 c0.39,0.89,1.42,1.29,2.3,0.91c0.44-0.19,0.76-0.55,0.93-0.96l0,0l3.16-7.98l3.7,9.76c0.34,0.91,1.35,1.36,2.26,1.02 c0.91-0.34,1.36-1.35,1.02-2.26l-5.27-13.9c-0.15-0.49-0.52-0.91-1.03-1.11c-0.9-0.36-1.92,0.09-2.28,0.99l-3.27,8.27l-3.26-7.48 c-0.14-0.33-0.39-0.62-0.72-0.81c-0.83-0.49-1.91-0.21-2.39,0.62l-8.52,14.5l-0.61-1.93c-0.29-0.92-1.27-1.44-2.19-1.15 c-0.92,0.29-1.44,1.27-1.15,2.19l11.27,35.85l-6.78,1.01C41.72,90.57,39.22,85.73,36.37,82.46L36.37,82.46z M14.26,18.49 c-0.79-0.74-1.21-1.73-1.25-2.73c-0.04-1,0.31-2.02,1.04-2.81c0.74-0.79,1.73-1.21,2.73-1.25c1-0.04,2.02,0.31,2.81,1.04l6.28,5.85 c0.79,0.74,1.21,1.73,1.25,2.73c0.04,1.01-0.31,2.02-1.04,2.81c-0.74,0.79-1.73,1.21-2.73,1.25c-1.01,0.04-2.02-0.31-2.81-1.04 L14.26,18.49L14.26,18.49z M3.99,61.66c-1.06,0.02-2.03-0.39-2.75-1.06C0.51,59.91,0.04,58.95,0,57.86 c-0.04-1.08,0.37-2.08,1.06-2.81c0.69-0.73,1.65-1.2,2.74-1.23l8.57-0.29c1.08-0.04,2.08,0.37,2.81,1.06 c0.73,0.69,1.2,1.65,1.23,2.74l0,0.06h0.01l-0.01,0.14c-0.02,1.01-0.42,1.92-1.06,2.61c-0.69,0.73-1.65,1.19-2.74,1.23l-0.06,0 v0.01l-0.09,0L3.99,61.66L3.99,61.66z M110.71,49.51l0.13-0.01c1.02-0.06,1.97,0.27,2.71,0.87c0.78,0.63,1.31,1.57,1.43,2.64 l0,0.04c0.01,0,0.01,0.11,0.01,0.13c0.06,1.02-0.27,1.97-0.87,2.71c-0.63,0.78-1.57,1.31-2.64,1.43l-8.53,0.9 c-1.08,0.11-2.1-0.23-2.87-0.86c-0.78-0.63-1.32-1.57-1.43-2.64c-0.11-1.07,0.23-2.1,0.86-2.87c0.63-0.78,1.57-1.32,2.64-1.43 C105,50.11,107.86,49.78,110.71,49.51L110.71,49.51L110.71,49.51z M93.81,15.37c0.61-0.9,1.51-1.46,2.49-1.66 c0.98-0.19,2.03-0.01,2.94,0.59l0.01,0.01c0.9,0.6,1.47,1.51,1.66,2.49c0.19,0.98,0.01,2.03-0.59,2.94l-4.77,7.13 c-0.6,0.9-1.51,1.47-2.5,1.67c-0.98,0.19-2.03,0.01-2.94-0.59c-0.9-0.6-1.47-1.52-1.67-2.5c-0.19-0.98-0.01-2.03,0.59-2.94 L93.81,15.37L93.81,15.37z M56.77,3.83c0.03-1.09,0.49-2.06,1.22-2.75c0.71-0.68,1.69-1.09,2.75-1.08l0-0.01 c0.09,0,0.18,0.01,0.27,0.02c0.99,0.08,1.88,0.53,2.52,1.2c0.68,0.71,1.09,1.68,1.08,2.75l0.01,0c0,0.07,0,0.14-0.01,0.2 l-0.21,8.37h0.01c0,0.09-0.01,0.18-0.02,0.27c-0.08,1-0.53,1.88-1.2,2.52c-0.72,0.68-1.69,1.09-2.75,1.08v0.01 c-0.09,0-0.18-0.01-0.27-0.02c-1-0.08-1.88-0.53-2.52-1.2c-0.68-0.72-1.09-1.69-1.08-2.75h-0.01c0-0.07,0-0.14,0.01-0.2L56.77,3.83 L56.77,3.83z M71.42,95.84l-0.63,2.95l-0.16,2.1l-25.33,3.77c-0.09-1.51-0.33-3.14-0.71-4.83L71.42,95.84L71.42,95.84z M70.58,105.49l0.02,1.27l0.03,0.44c0.07,0.83,0.08,1.67,0.03,2.5l-0.38,1.83l-23.53,3.5l-0.41-0.94l-0.92-3.76l-0.02-1.09 L70.58,105.49L70.58,105.49z M68.73,116.35c-1.22,2.09-2.9,3.72-4.82,4.83c-1.71,1-3.62,1.57-5.53,1.69 c-1.94,0.12-3.9-0.25-5.69-1.11c-1.22-0.6-2.36-1.43-3.37-2.51L68.73,116.35L68.73,116.35z"></path> </g> </g></svg>
        <p style={{textAlign:"center"}}>{t("header.lightModeBtn")}</p>
      </div>
      {/*     Github Button     */}
      <a style={{display: "flex", flexDirection: "column", gap:"2px"}} href="https://github.com/LuaComTil" target="_blank">
        <svg style={{height:"48px"}} fill={theme.text} viewBox="0 0 48 48" id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><defs></defs><path d="M24,2.5a21.5,21.5,0,0,0-6.8,41.9c1.08.2,1.47-.46,1.47-1s0-1.86,0-3.65c-6,1.3-7.24-2.88-7.24-2.88A5.7,5.7,0,0,0,9,33.68c-1.95-1.33.15-1.31.15-1.31a4.52,4.52,0,0,1,3.29,2.22c1.92,3.29,5,2.34,6.26,1.79a4.61,4.61,0,0,1,1.37-2.88c-4.78-.54-9.8-2.38-9.8-10.62a8.29,8.29,0,0,1,2.22-5.77,7.68,7.68,0,0,1,.21-5.69s1.8-.58,5.91,2.2a20.46,20.46,0,0,1,10.76,0c4.11-2.78,5.91-2.2,5.91-2.2a7.74,7.74,0,0,1,.21,5.69,8.28,8.28,0,0,1,2.21,5.77c0,8.26-5,10.07-9.81,10.61a5.12,5.12,0,0,1,1.46,4c0,2.87,0,5.19,0,5.9s.39,1.24,1.48,1A21.5,21.5,0,0,0,24,2.5" style={{fill: 'none',stroke: `${theme.text}`,strokeWidth: '2',strokeLinecap: 'round',strokeLinejoin: 'round',fillRule: 'evenodd'}}></path></g></svg>
        <p style={{textAlign:"center"}}>Github</p>
      </a>
      {/*     LinkedIn Button     */}
      <a style={{display: "flex", flexDirection: "column", gap:"2px"}} href="https://www.linkedin.com/in/lu%C3%A3/" target="_blank">
        <svg style={{height:"48px"}} fill={theme.text} version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="-143 145 512 512"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M113,145c-141.4,0-256,114.6-256,256s114.6,256,256,256s256-114.6,256-256S254.4,145,113,145z M272.8,560.7 c-20.8,20.8-44.9,37.1-71.8,48.4c-27.8,11.8-57.4,17.7-88,17.7c-30.5,0-60.1-6-88-17.7c-26.9-11.4-51.1-27.7-71.8-48.4 c-20.8-20.8-37.1-44.9-48.4-71.8C-107,461.1-113,431.5-113,401s6-60.1,17.7-88c11.4-26.9,27.7-51.1,48.4-71.8 c20.9-20.8,45-37.1,71.9-48.5C52.9,181,82.5,175,113,175s60.1,6,88,17.7c26.9,11.4,51.1,27.7,71.8,48.4 c20.8,20.8,37.1,44.9,48.4,71.8c11.8,27.8,17.7,57.4,17.7,88c0,30.5-6,60.1-17.7,88C309.8,515.8,293.5,540,272.8,560.7z"></path> <rect x="-8.5" y="348.4" width="49.9" height="159.7"></rect> <path d="M15.4,273c-18.4,0-30.5,11.9-30.5,27.7c0,15.5,11.7,27.7,29.8,27.7h0.4c18.8,0,30.5-12.3,30.4-27.7 C45.1,284.9,33.8,273,15.4,273z"></path> <path d="M177.7,346.9c-28.6,0-46.5,15.6-49.8,26.6v-25.1H71.8c0.7,13.3,0,159.7,0,159.7h56.1v-86.3c0-4.9-0.2-9.7,1.2-13.1 c3.8-9.6,12.1-19.6,27-19.6c19.5,0,28.3,14.8,28.3,36.4v82.6H241v-88.8C241,369.9,213.2,346.9,177.7,346.9z"></path> </g> </g></svg>            
        <p style={{textAlign:"center"}}>LinkedIn</p>
      </a>
    </HeaderComponent>
  );
};

export default Header;
